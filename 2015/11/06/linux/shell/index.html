<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>shell | Wiki</title>
  <meta name="author" content="Jassassin">
  
  <meta name="description" content="基础语法变量(1) 使用一个定义过的变量，只要在变量名前面加美元符号（$）即可.变量名外面的花括号是可选的，加不加都行，加花括号是为了帮助解释器识别变量的边界.(2) 只读变量，使用 readonly 命令可以将变量定义为只读变量，只读变量的值不能被改变(3) 删除变量, 使用 unset 命令可以">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="shell"/>
  <meta property="og:site_name" content="Wiki"/>

  
    <meta property="og:image" content="undefined"/>
  

  
    <link rel="alternative" href="/atom.xml" title="Wiki" type="application/atom+xml">
  
  
    <link href="/favicon.ico" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">  
  <link rel="stylesheet" href="/css/sidenav.css" media="screen" type="text/css">  
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  

</head>

<body id="body" data-spy="scroll" data-target=".toc">
  <div class="container" id="container">
	<div class="content">
	  <div class="page-header">		
  <h1><a class="brand" href="/">Wiki</a><span class="split"></span><span class="title">shell</span><span class="date" id="title-date"><i class="fa fa-clock-o"></i> 2015-11-06</span></h1>
</div>		

<div class="row page">
  <!-- cols -->	
  
  <div class="col-xs-12 col-sm-3 col-md-3 toc"> 
	<!-- toc -->
<script type="text/javascript">
		jQuery(document).ready(function() {
 		   generateWikiTOC('.note', '.toc',  2 , 2 );
		});
</script>
  </div><!-- col-md-3 -->
  
  

  
  <div class="col-xs-12 col-sm-9 col-md-9 note">
	

	  <!-- content -->
	  <h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>(1) 使用一个定义过的变量，只要在变量名前面加美元符号（$）即可.变量名外面的花括号是可选的，加不加都行，加花括号是为了帮助解释器识别变量的边界.<br>(2) 只读变量，使用 readonly 命令可以将变量定义为只读变量，只读变量的值不能被改变<br>(3) 删除变量, 使用 unset 命令可以删除变量。变量被删除后不能再次使用；unset 命令不能删除只读变量。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> skill <span class="keyword">in</span> Ada Coffe Action Java</div><div class="line"><span class="keyword">do</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"I am good at <span class="variable">$&#123;skill&#125;</span>Script"</span></div><div class="line"><span class="keyword">done</span></div><div class="line"></div><div class="line"><span class="comment"># readonly,unset</span></div><div class="line">ro=<span class="string">"ro"</span></div><div class="line">un=<span class="string">"unset"</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"before readonly ro:<span class="variable">$&#123;ro&#125;</span>, unset un:<span class="variable">$&#123;un&#125;</span>"</span></div><div class="line"></div><div class="line"><span class="built_in">unset</span> un</div><div class="line"><span class="built_in">readonly</span> ro</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"unset un:<span class="variable">$&#123;un&#125;</span>"</span></div><div class="line">ro=<span class="string">"unro"</span></div><div class="line"></div><div class="line">------------------ 输出 ------------------</div><div class="line">I am good at AdaScript</div><div class="line">I am good at CoffeScript</div><div class="line">I am good at ActionScript</div><div class="line">I am good at JavaScript</div><div class="line">before <span class="built_in">readonly</span> ro:ro, <span class="built_in">unset</span> un:<span class="built_in">unset</span></div><div class="line"><span class="built_in">unset</span> un:</div><div class="line">variable.sh: 18: variable.sh: ro: is <span class="built_in">read</span> only</div></pre></td></tr></table></figure>
<h3 id="特殊变量"><a href="#特殊变量" class="headerlink" title="特殊变量"></a>特殊变量</h3><table>
<thead>
<tr>
<th style="text-align:left">变量</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">$0</td>
<td style="text-align:left">当前脚本的文件名</td>
</tr>
<tr>
<td style="text-align:left">$n</td>
<td style="text-align:left">传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是$1，第二个参数是$2。</td>
</tr>
<tr>
<td style="text-align:left">$#</td>
<td style="text-align:left">传递给脚本或函数的参数个数。</td>
</tr>
<tr>
<td style="text-align:left">$*</td>
<td style="text-align:left">传递给脚本或函数的所有参数。</td>
</tr>
<tr>
<td style="text-align:left">$@</td>
<td style="text-align:left">传递给脚本或函数的所有参数。被双引号(“ “)包含时，与 $* 稍有不同。</td>
</tr>
<tr>
<td style="text-align:left">$?</td>
<td style="text-align:left">上个命令的退出状态，或函数的返回值。</td>
</tr>
<tr>
<td style="text-align:left">$$</td>
<td style="text-align:left">当前Shell进程ID。对于 Shell 脚本，就是这些脚本所在的进程ID</td>
</tr>
</tbody>
</table>
<ul>
<li>$<em> 和 $@ 都表示传递给函数或脚本的所有参数，不被双引号(“ “)包含时，都以”$1” “$2” … “$n” 的形式输出所有参数。但是当它们被双引号(“ “)包含时，”$</em>“ 会将所有的参数作为一个整体，以”$1 $2 … $n”的形式输出所有参数；”$@” 会将各个参数分开，以”$1” “$2” … “$n” 的形式输出所有参数 *<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">curr_file_name=<span class="variable">$0</span></div><div class="line">input_params_count=<span class="variable">$#</span></div><div class="line">curr_pro_id=$$</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"current bash file name:<span class="variable">$&#123;curr_file_name&#125;</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"current progress id:<span class="variable">$&#123;curr_pro_id&#125;</span>"</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"input params count:<span class="variable">$&#123;input_params_count&#125;</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"\$@ = <span class="variable">$@</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"\$* = $*"</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"\$? = $?"</span></div><div class="line"></div><div class="line">----------------- 输出 -----------------</div><div class="line">current bash file name:variable.sh</div><div class="line">current progress id:11431</div><div class="line">input params count:3</div><div class="line"><span class="variable">$@</span> = 1 2 3</div><div class="line">$* = 1 2 3</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="替换变量和命令"><a href="#替换变量和命令" class="headerlink" title="替换变量和命令"></a>替换变量和命令</h3><p>(1) 命令替换: 是指Shell可以先执行命令，将输出结果暂时保存，在适当的地方输出。<br>(2) 变量替换: 可以根据变量的状态（是否为空、是否定义等）来改变它的值</p>
<table>
<thead>
<tr>
<th style="text-align:left">形式</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">${var}</td>
<td style="text-align:left">变量本来的值</td>
</tr>
<tr>
<td style="text-align:left">${var:-word}</td>
<td style="text-align:left">如果变量 var 为空或已被删除(unset)，那么返回 word，但不改变 var 的值。</td>
</tr>
<tr>
<td style="text-align:left">${var:=word}</td>
<td style="text-align:left">如果变量 var 为空或已被删除(unset)，那么返回 word，并将 var 的值设置为 word。</td>
</tr>
<tr>
<td style="text-align:left">${var:+word}</td>
<td style="text-align:left">如果变量 var 被定义，那么返回 word，但不改变 var 的值</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="string">"current date: `date`"</span></div><div class="line"></div><div class="line">age=<span class="variable">$&#123;p1:-20&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"Undefined p1 for \$&#123;p1:-20&#125; = <span class="variable">$&#123;age&#125;</span>, p1 = <span class="variable">$&#123;p1&#125;</span>"</span></div><div class="line"></div><div class="line">num=<span class="variable">$&#123;p2:=30&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"Undefined p2 for \$&#123;p2:=30&#125; = <span class="variable">$&#123;num&#125;</span>, p2 = <span class="variable">$&#123;p2&#125;</span>"</span></div><div class="line"></div><div class="line">count=<span class="variable">$&#123;num:+40&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"defined num for \$&#123;num:+40&#125; = <span class="variable">$&#123;count&#125;</span>, num = <span class="variable">$&#123;num&#125;</span>"</span></div><div class="line"></div><div class="line">val=<span class="variable">$&#123;p3:+50&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"Undefined p3 for \$&#123;p3:+50&#125; = <span class="variable">$&#123;val&#125;</span>, p3 = <span class="variable">$&#123;p3&#125;</span>"</span></div><div class="line"></div><div class="line">----------------- 输出-----------------</div><div class="line">current date: 2015年 11月 06日 星期五 15:14:32 CST</div><div class="line">Undefined p1 <span class="keyword">for</span> <span class="variable">$&#123;p1:-20&#125;</span> = 20, p1 =</div><div class="line">Undefined p2 <span class="keyword">for</span> <span class="variable">$&#123;p2:=30&#125;</span> = 30, p2 = 30</div><div class="line">defined num <span class="keyword">for</span> <span class="variable">$&#123;num:+40&#125;</span> = 40, num = 30</div><div class="line">Undefined p3 <span class="keyword">for</span> <span class="variable">$&#123;p3:+50&#125;</span> = , p3 =</div></pre></td></tr></table></figure>
<h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><p><code>expr</code>是一款表达式计算工具，使用它能完成表达式的求值操作.注意表达式和运算符之间要有空格.如”2+2”是错误的，应该是”2 + 2”(空格).同时整个表达式要用”`”括起来！<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">p1=1</div><div class="line">p2=2</div><div class="line"></div><div class="line">val=`expr <span class="variable">$p1</span> + <span class="variable">$p2</span>`</div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;p1&#125;</span> + <span class="variable">$&#123;p2&#125;</span> = <span class="variable">$&#123;val&#125;</span>"</span></div><div class="line"></div><div class="line">val=`expr <span class="variable">$p1</span> - <span class="variable">$p2</span>`</div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;p1&#125;</span> - <span class="variable">$&#123;p2&#125;</span> = <span class="variable">$&#123;val&#125;</span>"</span></div><div class="line"></div><div class="line">val=`expr <span class="variable">$p1</span> \* <span class="variable">$p2</span>`</div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;p1&#125;</span> * <span class="variable">$&#123;p2&#125;</span> = <span class="variable">$&#123;val&#125;</span>"</span></div><div class="line"></div><div class="line">val=`expr <span class="variable">$p1</span> / <span class="variable">$p2</span>`</div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;p1&#125;</span> / <span class="variable">$&#123;p2&#125;</span> = <span class="variable">$&#123;val&#125;</span>"</span></div><div class="line"></div><div class="line">----------------- 输出 -----------------</div><div class="line">1 + 2 = 3</div><div class="line">1 - 2 = -1</div><div class="line">1 * 2 = 2</div><div class="line">1 / 2 = 0</div></pre></td></tr></table></figure></p>
<h3 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h3><p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">a=1</div><div class="line">b=2</div><div class="line">c=1</div><div class="line"></div><div class="line"><span class="comment"># -eq	检测两个数是否相等，相等返回 true。</span></div><div class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> <span class="_">-eq</span> <span class="variable">$b</span> ]</div><div class="line"><span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;a&#125;</span> == <span class="variable">$&#123;b&#125;</span>"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;a&#125;</span> != <span class="variable">$&#123;b&#125;</span>"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="comment"># -ne	检测两个数是否相等，不相等返回 true。</span></div><div class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> <span class="_">-ne</span> <span class="variable">$b</span> ]</div><div class="line"><span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;a&#125;</span> != <span class="variable">$&#123;b&#125;</span>"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;a&#125;</span> == <span class="variable">$&#123;b&#125;</span>"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="comment"># -gt	检测左边的数是否大于右边的，如果是，则返回 true。</span></div><div class="line"><span class="keyword">if</span> [ <span class="variable">$b</span> <span class="_">-gt</span> <span class="variable">$a</span> ]</div><div class="line"><span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;b&#125;</span> &gt; <span class="variable">$&#123;a&#125;</span>"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;b&#125;</span> &lt;= <span class="variable">$&#123;a&#125;</span>"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="comment"># -ge	检测左边的数是否大等于右边的，如果是，则返回 true。</span></div><div class="line"><span class="keyword">if</span> [ <span class="variable">$c</span> -ge <span class="variable">$a</span> ]</div><div class="line"><span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;c&#125;</span> &gt;= <span class="variable">$&#123;a&#125;</span>"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;c&#125;</span> &lt; <span class="variable">$&#123;a&#125;</span>"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="comment"># -lt	检测左边的数是否小于右边的，如果是，则返回 true。</span></div><div class="line"><span class="keyword">if</span> [ <span class="variable">$b</span> <span class="_">-lt</span> <span class="variable">$a</span> ]</div><div class="line"><span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;b&#125;</span> &lt; <span class="variable">$&#123;a&#125;</span>"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;b&#125;</span> &gt;= <span class="variable">$&#123;a&#125;</span>"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="comment"># -le	检测左边的数是否小于等于右边的，如果是，则返回 true</span></div><div class="line"><span class="keyword">if</span> [ <span class="variable">$c</span> <span class="_">-lt</span> <span class="variable">$a</span> ]</div><div class="line"><span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;c&#125;</span> &lt;= <span class="variable">$&#123;a&#125;</span>"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;c&#125;</span> &gt; <span class="variable">$&#123;a&#125;</span>"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="comment">##################### 输出 #########################</span></div><div class="line">1 != 2</div><div class="line">1 != 2</div><div class="line">2 &gt; 1</div><div class="line">1 &gt;= 1</div><div class="line">2 &gt;= 1</div><div class="line">1 &gt; 1</div></pre></td></tr></table></figure></p>
<h3 id="布尔运算符"><a href="#布尔运算符" class="headerlink" title="布尔运算符"></a>布尔运算符</h3><p><code>!</code>非,<code>-a</code>与,<code>-o</code>或<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">d=0</div><div class="line"></div><div class="line"><span class="keyword">if</span> [ <span class="variable">$d</span> <span class="_">-gt</span> 0 <span class="_">-a</span> <span class="variable">$d</span> <span class="_">-lt</span> 3 ]; <span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"0 &lt; <span class="variable">$&#123;d&#125;</span> &lt; 3"</span></div><div class="line"><span class="keyword">elif</span> [ <span class="variable">$d</span> <span class="_">-lt</span> 0 -o <span class="variable">$d</span> <span class="_">-gt</span> 3 ]; <span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;d&#125;</span> &lt; 0 | <span class="variable">$&#123;d&#125;</span> &gt; 3"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;d&#125;</span> == 0 | <span class="variable">$&#123;d&#125;</span> == 3"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line">----------------- 输出-----------------</div><div class="line">0 == 0 | 0 == 3</div></pre></td></tr></table></figure></p>
<h3 id="字符串运算符"><a href="#字符串运算符" class="headerlink" title="字符串运算符"></a>字符串运算符</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">msg1=<span class="string">"hello"</span></div><div class="line">msg2=<span class="string">"world"</span></div><div class="line">msg3=<span class="string">"world"</span></div><div class="line">msg4=<span class="string">""</span></div><div class="line"></div><div class="line"><span class="comment"># =	检测两个字符串是否相等，相等返回 true。</span></div><div class="line"><span class="keyword">if</span> [ <span class="variable">$&#123;msg1&#125;</span> = <span class="variable">$&#123;msg2&#125;</span> ]; <span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;msg1&#125;</span> = <span class="variable">$&#123;msg2&#125;</span>"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;msg1&#125;</span> != <span class="variable">$&#123;msg2&#125;</span>"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="comment"># -z	检测字符串长度是否为0，为0返回 true。</span></div><div class="line"><span class="keyword">if</span> [ -z <span class="variable">$&#123;msg4&#125;</span> ]; <span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"msg4's length is 0!"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="comment"># -n	检测字符串长度是否为0，不为0返回 true。</span></div><div class="line"><span class="keyword">if</span> [ -n <span class="variable">$&#123;msg3&#125;</span> ]; <span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;msg3&#125;</span> is not null!"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line">----------------- 输出 -----------------</div><div class="line">hello != world</div><div class="line">msg4<span class="string">'s length is 0!</span></div><div class="line">world is not null!</div></pre></td></tr></table></figure>
<p><em>注意未定义字符串的判断</em><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> [ -z <span class="variable">$a</span> ]; <span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"Undefined a length is 0!"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> [ -n <span class="variable">$a</span> ]; <span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"Undefined a length is not 0!"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$a</span>"</span> ]; <span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"Undefined a length is 0!"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$a</span>"</span> ]; <span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"Undefined a length is not 0!"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="comment"># 如果a为空或者没有赋值，那么a的值赋为0 (鸟哥的私房菜基础篇379页)</span></div><div class="line">a=<span class="variable">$&#123;a:-0&#125;</span></div><div class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> <span class="_">-eq</span> 0 ]; <span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"\$a is null!"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line">----------------- 输出 -----------------</div><div class="line">Undefined a length is 0!</div><div class="line">Undefined a length is not 0!</div><div class="line">Undefined a length is 0!</div><div class="line">Undefined a length is 0!</div><div class="line"><span class="variable">$a</span> is null!</div></pre></td></tr></table></figure></p>
<h3 id="文件测试运算"><a href="#文件测试运算" class="headerlink" title="文件测试运算"></a>文件测试运算</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">file=<span class="string">"/home/eagle/myspace/exercise/shell/demo.sh"</span></div><div class="line"></div><div class="line"><span class="comment"># -e file 检测文件（包括目录）是否存在，如果是，则返回 true。</span></div><div class="line"><span class="keyword">if</span> [ <span class="_">-e</span> <span class="variable">$file</span> ]; <span class="keyword">then</span></div><div class="line"></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$file</span> exists!"</span></div><div class="line"></div><div class="line">	<span class="comment"># -d file 检测文件是否是目录，如果是，则返回 true。</span></div><div class="line">	<span class="keyword">if</span> [ <span class="_">-d</span> <span class="variable">$file</span> ];<span class="keyword">then</span></div><div class="line"></div><div class="line">		<span class="built_in">echo</span> <span class="string">"<span class="variable">$file</span> is directory!"</span></div><div class="line"></div><div class="line">	<span class="comment"># -f file 检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</span></div><div class="line">	<span class="keyword">elif</span> [ <span class="_">-f</span> <span class="variable">$file</span> ]; <span class="keyword">then</span></div><div class="line"></div><div class="line">		<span class="built_in">echo</span> <span class="string">"<span class="variable">$file</span> is file!"</span></div><div class="line"></div><div class="line">		<span class="comment"># -s file 检测文件是否为空（文件大小是否大于0），不为空返回 true。</span></div><div class="line">		<span class="keyword">if</span> [ <span class="_">-s</span> <span class="variable">$file</span> ]; <span class="keyword">then</span></div><div class="line"></div><div class="line">			<span class="built_in">echo</span> <span class="string">"<span class="variable">$file</span> is not null!"</span></div><div class="line"></div><div class="line">			<span class="comment"># -r file 检测文件是否可读，如果是，则返回 true。</span></div><div class="line">			<span class="keyword">if</span> [ -r <span class="variable">$file</span> ]; <span class="keyword">then</span></div><div class="line"></div><div class="line">				<span class="built_in">echo</span> <span class="string">"<span class="variable">$file</span> can be read!"</span></div><div class="line"></div><div class="line">			<span class="keyword">fi</span></div><div class="line"></div><div class="line">		<span class="keyword">fi</span></div><div class="line"></div><div class="line">	<span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="keyword">else</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$file</span> not exists!"</span></div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line">----------------- 输出 -----------------</div><div class="line">/home/eagle/myspace/exercise/shell/demo.sh exists!</div><div class="line">/home/eagle/myspace/exercise/shell/demo.sh is file!</div><div class="line">/home/eagle/myspace/exercise/shell/demo.sh is not null!</div><div class="line">/home/eagle/myspace/exercise/shell/demo.sh can be <span class="built_in">read</span>!</div></pre></td></tr></table></figure>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>引号<br>单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的；单引号字串中不能出现单引号（对单引号使用转义符后也不行）<br>双引号里可以有变量；双引号里可以出现转义字符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">msg=<span class="string">"hello world!"</span></div><div class="line"></div><div class="line"><span class="comment"># 获取字符串长度</span></div><div class="line">msg_length=<span class="variable">$&#123;#msg&#125;</span></div><div class="line"></div><div class="line"><span class="comment"># 获取字符位置</span></div><div class="line">w_index=`expr index <span class="string">"<span class="variable">$&#123;msg&#125;</span>"</span> w`</div><div class="line"></div><div class="line"><span class="comment"># "#"从左边第一次出现查询字符o截取，保留右边字符</span></div><div class="line">sub_msg=<span class="variable">$&#123;msg#*o&#125;</span></div><div class="line"></div><div class="line"><span class="comment"># "##"从左边最后一次出现查询字符o截取，保留右边字符</span></div><div class="line">sub_msg2=<span class="variable">$&#123;msg##*o&#125;</span></div><div class="line"></div><div class="line"><span class="comment"># "%"从右边第一次出现查询字符o截取，保留左边字符</span></div><div class="line">sub_msg3=<span class="variable">$&#123;msg%o*&#125;</span></div><div class="line"></div><div class="line"><span class="comment"># "%%"从右边最后一次出现查询字符o截取，保留左边字符</span></div><div class="line">sub_msg4=<span class="variable">$&#123;msg%%o*&#125;</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;msg&#125;</span> length: <span class="variable">$&#123;msg_length&#125;</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"w index of <span class="variable">$&#123;msg&#125;</span> is <span class="variable">$&#123;w_index&#125;</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"sub_msg:<span class="variable">$&#123;sub_msg&#125;</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"sub_msg2:<span class="variable">$&#123;sub_msg2&#125;</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"sub_msg3:<span class="variable">$&#123;sub_msg3&#125;</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"sub_msg4:<span class="variable">$&#123;sub_msg4&#125;</span>"</span></div><div class="line"></div><div class="line">-----------------输出-----------------</div><div class="line">hello world! length: 12</div><div class="line">w index of hello world! is 7</div><div class="line">sub_msg: world!</div><div class="line">sub_msg2:rld!</div><div class="line">sub_msg3:hello w</div><div class="line">sub_msg4:hell</div></pre></td></tr></table></figure>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>bash支持一维数组（不支持多维数组），并且没有限定数组的大小。类似与C语言，数组元素的下标由0开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于0。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#数组定义方式1</span></div><div class="line">str_arr=(<span class="string">"hello"</span> <span class="string">"world"</span> <span class="string">"!"</span>)</div><div class="line"></div><div class="line"><span class="comment">#数组定义方式2</span></div><div class="line">num_arr[0]=1</div><div class="line">num_arr[1]=2</div><div class="line">num_arr[2]=3</div><div class="line"></div><div class="line"><span class="comment"># 获取数组中的所有元素</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"str_arr:<span class="variable">$&#123;str_arr[*]&#125;</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"num_arr:<span class="variable">$&#123;num_arr[@]&#125;</span>"</span></div><div class="line"></div><div class="line"><span class="comment"># 获取数组长度</span></div><div class="line">str_arr_length=<span class="variable">$&#123;#str_arr[*]&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"str_arr array length:<span class="variable">$&#123;str_arr_length&#125;</span>"</span></div><div class="line"></div><div class="line">-----------------输出 -----------------</div><div class="line">str_arr:hello world !</div><div class="line">num_arr:1 2 3</div><div class="line">str_arr array length:3</div></pre></td></tr></table></figure></p>
<h3 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h3><p>printf 由POSIX标准所定义，移植性要比echo好.<br>printf 不像echo那样会自动换行，必须显式添加换行符(\n)。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">n1=1</div><div class="line">n2=2</div><div class="line">s1=<span class="string">"a"</span></div><div class="line">s2=<span class="string">"b"</span></div><div class="line"></div><div class="line"><span class="built_in">printf</span> <span class="string">"%d %s \n"</span> <span class="variable">$n1</span> <span class="variable">$s1</span> <span class="variable">$n2</span>  <span class="variable">$s2</span></div><div class="line"></div><div class="line"><span class="comment"># 如果没有 arguments，那么 %s 用NULL代替，%d 用 0 代替</span></div><div class="line"><span class="built_in">printf</span> <span class="string">"%d %s \n"</span></div><div class="line"></div><div class="line"><span class="comment"># 格式只指定了一个参数，但多出的参数仍然会按照该格式输出</span></div><div class="line"><span class="built_in">printf</span> <span class="string">"%s"</span> a b c</div><div class="line"></div><div class="line">-----------------输出-----------------</div><div class="line">1 a</div><div class="line">2 b</div><div class="line">0</div></pre></td></tr></table></figure>
<h3 id="case-esac语句"><a href="#case-esac语句" class="headerlink" title="case esac语句"></a>case esac语句</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 读取输入，根据输入数字判断星期几。如果都不匹配则是非法数字。</span></div><div class="line"><span class="built_in">read</span> num</div><div class="line"></div><div class="line"><span class="keyword">case</span> <span class="variable">$num</span> <span class="keyword">in</span></div><div class="line">	1 )</div><div class="line">		<span class="built_in">echo</span> <span class="string">"today is Monday!"</span></div><div class="line">		;;</div><div class="line">	2 )</div><div class="line">		<span class="built_in">echo</span> <span class="string">"today is Tuesday!"</span></div><div class="line">		;;</div><div class="line">	3 )</div><div class="line">		<span class="built_in">echo</span> <span class="string">"today is Wednesday!"</span></div><div class="line">		;;</div><div class="line">	4 )</div><div class="line">		<span class="built_in">echo</span> <span class="string">"today is Thursday!"</span></div><div class="line">		;;</div><div class="line">	5 )</div><div class="line">		<span class="built_in">echo</span> <span class="string">"today is Friday!"</span></div><div class="line">		;;</div><div class="line">	6 )</div><div class="line">		<span class="built_in">echo</span> <span class="string">"today is Saturday!"</span></div><div class="line">		;;</div><div class="line">	7 )</div><div class="line">		<span class="built_in">echo</span> <span class="string">"today is Sunday!"</span></div><div class="line">		;;</div><div class="line">	<span class="comment"># 当以上所有都不匹配时执行</span></div><div class="line">	* )</div><div class="line">		<span class="built_in">echo</span> <span class="string">"invalid numbser!"</span></div><div class="line">	;;</div><div class="line"><span class="keyword">esac</span></div></pre></td></tr></table></figure>
<h3 id="循环控制"><a href="#循环控制" class="headerlink" title="循环控制"></a>循环控制</h3><ol>
<li>break<br>break命令允许跳出所有循环（终止执行后面的所有循环.<code>break n</code>代表跳出几层循环。<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 读取键盘输入的数字直到该数字是[1,5]</span></div><div class="line"></div><div class="line"><span class="keyword">while</span> :</div><div class="line"><span class="keyword">do</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"input one number between 1 to 5"</span></div><div class="line">	<span class="built_in">read</span> number</div><div class="line">	<span class="keyword">case</span> <span class="variable">$number</span> <span class="keyword">in</span></div><div class="line">		1|2|3|4|5)</div><div class="line">			<span class="built_in">echo</span> <span class="string">"valid number:<span class="variable">$&#123;number&#125;</span>"</span></div><div class="line">			<span class="built_in">break</span></div><div class="line">			;;</div><div class="line">	<span class="keyword">esac</span></div><div class="line"></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>2.continue<br>continue命令与break命令类似，只有一点差别，它不会跳出所有循环，仅仅跳出当前循环.continue 后面也可以跟一个数字，表示跳出第几层循环。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">arr=(1 2 3 4 5)</div><div class="line"></div><div class="line"><span class="keyword">for</span> number <span class="keyword">in</span> <span class="variable">$&#123;arr[*]&#125;</span></div><div class="line"><span class="keyword">do</span></div><div class="line">	<span class="built_in">echo</span> <span class="variable">$number</span></div><div class="line">	m=`expr <span class="variable">$number</span> % 2`</div><div class="line">	<span class="keyword">if</span> [ <span class="variable">$&#123;m&#125;</span> <span class="_">-eq</span> 0 ]; <span class="keyword">then</span></div><div class="line">	 	<span class="built_in">echo</span> <span class="string">"find even number:<span class="variable">$&#123;number&#125;</span>"</span></div><div class="line">	 	<span class="built_in">continue</span></div><div class="line">	<span class="keyword">fi</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"find odd number:<span class="variable">$&#123;number&#125;</span>"</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure></p>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><p>find命令可以沿着文件层次结构向下遍历，匹配符合条件的文件，并执行相应的操作。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 在执行find命令的当前目录下查找文件名以md结尾的文件</span></div><div class="line">$ find . -name <span class="string">"*.md"</span></div><div class="line"><span class="comment"># 同上，只是iname不区分字母大小写</span></div><div class="line">$ find . -iname <span class="string">"*.md"</span></div><div class="line"><span class="comment"># 查询以".md"或".sh"结尾的文件</span></div><div class="line">$ find . \( -name <span class="string">"*.md"</span> -o  -name <span class="string">"*.sh"</span> \)</div><div class="line"><span class="comment"># 查询非".md"结尾的文件</span></div><div class="line">$ find . ！-name <span class="string">"*.md"</span></div></pre></td></tr></table></figure></p>
<ul>
<li>-maxdepth 指定最大深度，find默认会查询当前目录以及所有子目录。</li>
<li>-mindepth 指定最小深度</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 只查询当前目录，注意如果-type在-maxdepth之前，则linux会先查找所有文件然后再过滤最大深度</span></div><div class="line">$ find . -maxdepth 1 -name <span class="string">"*.sh"</span> -type f</div><div class="line">$ find . -mindepth 2 -name <span class="string">"*.sh"</span> -type f</div></pre></td></tr></table></figure>
<ul>
<li>根据文件相关时间进行搜索:-atime,-ctime,-mtime单位:天，-amin,-cmin,-min单位:分钟</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 当前目录下，最近3天被访问的文件</span></div><div class="line">$ find . -type f -atime -3</div><div class="line"><span class="comment"># 最近一天被修改</span></div><div class="line">$ find . -type f -mtime -1</div></pre></td></tr></table></figure>
<ul>
<li>基于文件大小搜索:k(kb),-b(byte),-M(mbyte),-G(gbyte)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 等于10k</span></div><div class="line">$ find . -type f -size 10k</div><div class="line"><span class="comment"># 大于10k</span></div><div class="line">$ find . -type f -size +10k</div><div class="line"><span class="comment"># 小于10k</span></div><div class="line">$ find . -type f -size -10k</div></pre></td></tr></table></figure>
<ul>
<li>删除匹配文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ find . -type f -name <span class="string">"*.txt"</span> -delete</div></pre></td></tr></table></figure>
<ul>
<li>find结合-exec参数</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 将以".md"结尾的文件拷贝到bak目录下，注意后面要有"\;"</span></div><div class="line">$ find . -type f -name <span class="string">"*.md"</span> -exec cp &#123;&#125; bak \;</div></pre></td></tr></table></figure>
<h3 id="xargs"><a href="#xargs" class="headerlink" title="xargs"></a>xargs</h3><p>通过管道符(|)，可以将一个命令的标准输入转换为另一个命令的标准输入。但，对于某些命令必须以参数的方式提供，此时便可通过xargs来实现。</p>
<ul>
<li>xargs将接收到的命令参数重新格式化</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 将多行输入转成单行输出(将\n用" "替换)</span></div><div class="line">$ cat shell.md | xargs</div><div class="line"><span class="comment"># 通过下面的命令可以将单行输入通过" "分隔，指定每行参数个数</span></div><div class="line">$ cat shell.md | xargs -n 3</div><div class="line"><span class="comment"># -d 指定自定义分隔符</span></div><div class="line">$ <span class="built_in">echo</span> <span class="string">"helloworldhelloworld"</span> | xargs <span class="_">-d</span> o -n 1</div></pre></td></tr></table></figure>
<ul>
<li>参数输入</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">$ cat params.txt</div><div class="line">hello</div><div class="line">java</div><div class="line">world</div><div class="line">python</div><div class="line"></div><div class="line"><span class="comment"># 将该文件中的所有内容作为参数</span></div><div class="line">$ cat parmas.txt | xargs -n 1 <span class="built_in">echo</span></div><div class="line"><span class="comment"># 参数替换</span></div><div class="line">$ cat parmas.txt | xargs -I &#123;&#125; <span class="built_in">echo</span> a-&#123;&#125;</div><div class="line"></div><div class="line">a-hello</div><div class="line">a-java</div><div class="line">a-world</div><div class="line">a-python</div></pre></td></tr></table></figure>
<h3 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h3><p>tr可对标准输入的字符进行替换、删除以及压缩。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 大写转小写</span></div><div class="line">$ <span class="built_in">echo</span> <span class="string">"WHO ARE YOU"</span> | tr <span class="string">'A-Z'</span> <span class="string">'a-z'</span></div><div class="line"><span class="comment"># 去除数字</span></div><div class="line">$ <span class="built_in">echo</span> <span class="string">"WHO 3 4 ARE YOU"</span> | tr <span class="_">-d</span> <span class="string">'0-9'</span></div><div class="line"><span class="comment"># 压缩空白字符</span></div><div class="line">$ <span class="built_in">echo</span> <span class="string">"WHO 3 4    ARE    YOU"</span> | tr <span class="_">-s</span> <span class="string">' '</span></div><div class="line">输出: WHO 3 4 ARE YOU</div></pre></td></tr></table></figure></p>
<h3 id="sort和uniq"><a href="#sort和uniq" class="headerlink" title="sort和uniq"></a>sort和uniq</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">$ cat a.dat</div><div class="line">jack 78</div><div class="line">rose 79</div><div class="line">tony 79</div><div class="line">rose 79</div><div class="line"></div><div class="line">$ sort a.data | uniq</div><div class="line">jack 78</div><div class="line">rose 79</div><div class="line">tony 79</div><div class="line"></div><div class="line"><span class="comment"># 按数字倒序排列</span></div><div class="line">$ sort -nr a.dat</div><div class="line">tony 79</div><div class="line">rose 79</div><div class="line">rose 79</div><div class="line">jack 78</div><div class="line"></div><div class="line"><span class="comment"># 按照第二列排序</span></div><div class="line">$ sort -k 2 a.dat</div><div class="line">jack 78</div><div class="line">rose 79</div><div class="line">rose 79</div><div class="line">tony 79</div><div class="line"></div><div class="line"><span class="comment"># -c该行的重复次数</span></div><div class="line">$ sort a.dat | uniq -c</div><div class="line">1 jack 78</div><div class="line">2 rose 79</div><div class="line">1 tony 79</div><div class="line"></div><div class="line"><span class="comment"># 找出重复的行</span></div><div class="line">$ sort a.dat | uniq <span class="_">-d</span></div><div class="line">rose 79</div></pre></td></tr></table></figure>
<p><em>uniq只能用于已经拍过序的数据输入</em></p>
<h3 id="RADNOM生成随机数"><a href="#RADNOM生成随机数" class="headerlink" title="RADNOM生成随机数"></a>RADNOM生成随机数</h3><h3 id="文件拆分"><a href="#文件拆分" class="headerlink" title="文件拆分"></a>文件拆分</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$ ll a.dat</div><div class="line">-rw-r--r-- 1 eagle eagle 32 11月 10 13:51 a.dat</div><div class="line"></div><div class="line"><span class="comment"># 将a.dat按照单个文件10byte拆分</span></div><div class="line">$ split -b 10 a.dat</div><div class="line">-rw-r--r-- 1 eagle eagle   10 11月 10 14:32 xaa</div><div class="line">-rw-r--r-- 1 eagle eagle   10 11月 10 14:32 xab</div><div class="line">-rw-r--r-- 1 eagle eagle   10 11月 10 14:32 xac</div><div class="line">-rw-r--r-- 1 eagle eagle    2 11月 10 14:32 xad</div><div class="line"></div><div class="line"><span class="comment"># -d 分割后的文件名以数字为后缀 -a 后缀长度 a_自定义前缀</span></div><div class="line">$ split -b 10 a.dat <span class="_">-d</span> <span class="_">-a</span> 4 a</div><div class="line">-rw-r--r-- 1 eagle eagle   10 11月 10 14:43 a_0000</div><div class="line">-rw-r--r-- 1 eagle eagle   10 11月 10 14:43 a_0001</div><div class="line">-rw-r--r-- 1 eagle eagle   10 11月 10 14:43 a_0002</div><div class="line">-rw-r--r-- 1 eagle eagle    2 11月 10 14:43 a_0003</div><div class="line"></div><div class="line"><span class="comment"># 按照文件行数分隔 -l 行数</span></div><div class="line">$ split <span class="_">-l</span> 2 a.dat</div></pre></td></tr></table></figure>
<p>截取文件前后缀:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">file_name=some.jpg</div><div class="line">file_name_prefix=<span class="variable">$&#123;file_name%.*&#125;</span></div><div class="line">file_name_subfix=<span class="variable">$&#123;file_name#*.&#125;</span></div></pre></td></tr></table></figure></p>
<h2 id="文本操作"><a href="#文本操作" class="headerlink" title="文本操作"></a>文本操作</h2><h3 id="生成指定大小的文件"><a href="#生成指定大小的文件" class="headerlink" title="生成指定大小的文件"></a>生成指定大小的文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># if文件输入(input file), of(output file),bs文件大小(字节), count bs大小倍数</span></div><div class="line">$  dd <span class="keyword">if</span>=/dev/zero of=junk.data bs=10M count=1</div><div class="line">1+0 records <span class="keyword">in</span></div><div class="line">1+0 records out</div><div class="line">10485760 bytes (10 MB) copied, 0.0128509 s, 816 MB/s</div></pre></td></tr></table></figure>
<h3 id="文本文件交集和差集"><a href="#文本文件交集和差集" class="headerlink" title="文本文件交集和差集"></a>文本文件交集和差集</h3><p><code>comm</code>,参与比较的两个文件必须事先已被排过序!<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">$ cat a.dat</div><div class="line">s</div><div class="line">t</div><div class="line">q</div><div class="line">c</div><div class="line">g</div><div class="line">t</div><div class="line">o</div><div class="line">$ cat b.dat</div><div class="line">g</div><div class="line">g</div><div class="line">r</div><div class="line">c</div><div class="line">h</div><div class="line">s</div><div class="line">o</div><div class="line"></div><div class="line"><span class="comment"># 文件排序</span></div><div class="line">$ sort a.dat -o a.dat; sort b.dat -o b.dat</div><div class="line"></div><div class="line"><span class="comment"># 比较结果: 只在a.dat出现的字符	只在b.dat出现的字符	两个文件交集</span></div><div class="line">$ comm a.dat b.dat</div><div class="line">		c</div><div class="line">		g</div><div class="line">	g</div><div class="line">	h</div><div class="line">		o</div><div class="line">q</div><div class="line">	r</div><div class="line">		s</div><div class="line">t</div><div class="line">t</div><div class="line"></div><div class="line"><span class="comment"># 从输出结果中删除第一和第二列，得出的结果即为两者交集</span></div><div class="line">$ comm a.dat b.dat -1 -2</div><div class="line">c</div><div class="line">g</div><div class="line">o</div><div class="line">s</div></pre></td></tr></table></figure></p>
<h3 id="统计文件行数和单词数以及字符数"><a href="#统计文件行数和单词数以及字符数" class="headerlink" title="统计文件行数和单词数以及字符数"></a>统计文件行数和单词数以及字符数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 行数</span></div><div class="line">$ wc <span class="_">-l</span> a.dat</div><div class="line">7 a.dat</div><div class="line"></div><div class="line"><span class="comment"># 字符数</span></div><div class="line">$ wc -c a.dat</div><div class="line">14 a.dat</div><div class="line"></div><div class="line"><span class="comment"># 单词数</span></div><div class="line">$ wc -w a.dat</div><div class="line">7 a.dat</div><div class="line"></div><div class="line"><span class="comment"># 打印最长行的长度</span></div><div class="line">$ wc demo.sh -L</div><div class="line">40 demo.sh</div></pre></td></tr></table></figure>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p><img src="/imgs/linux/reg.jpg" alt="reg"><br><img src="/imgs/linux/reg2.jpg" alt="reg2"></p>
<h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">$ grep <span class="string">".jpg"</span> demo.sh</div><div class="line">file_name=some.jpg<span class="string">'</span></div><div class="line"></div><div class="line"># 反向</div><div class="line">$ grep -v ".jpg" demo.sh</div><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">file_name_prefix=$&#123;file_name%.*&#125;</div><div class="line">file_name_subfix=$&#123;file_name#*.&#125;</div><div class="line"></div><div class="line">echo filename:$&#123;file_name&#125;</div><div class="line">echo filename prefix:$&#123;file_name_prefix&#125;</div><div class="line">echo filename subfix:$&#123;file_name_subfix&#125;</div><div class="line"></div><div class="line"># 包含搜索关键词的行数</div><div class="line">$ grep -c "file" demo.sh</div><div class="line">6</div><div class="line"></div><div class="line">$ grep -n "file" demo.sh</div><div class="line">3:file_name=some.jpg</div><div class="line">5:file_name_prefix=$&#123;file_name%.*&#125;</div><div class="line">6:file_name_subfix=$&#123;file_name#*.&#125;</div><div class="line">8:echo filename:$&#123;file_name&#125;</div><div class="line">9:echo filename prefix:$&#123;file_name_prefix&#125;</div><div class="line">10:echo filename subfix:$&#123;file_name_subfix&#125;</div></pre></td></tr></table></figure>
<ul>
<li>递归搜索</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">$ grep <span class="string">"file"</span> . -R -n</div><div class="line">./shell/demo.sh:3:file_name=some.jpg</div><div class="line">./shell/demo.sh:5:file_name_prefix=<span class="variable">$&#123;file_name%.*&#125;</span></div><div class="line">./shell/demo.sh:6:file_name_subfix=<span class="variable">$&#123;file_name#*.&#125;</span></div><div class="line">./shell/demo.sh:8:<span class="built_in">echo</span> filename:<span class="variable">$&#123;file_name&#125;</span></div><div class="line">./shell/demo.sh:9:<span class="built_in">echo</span> filename prefix:<span class="variable">$&#123;file_name_prefix&#125;</span></div><div class="line">./shell/demo.sh:10:<span class="built_in">echo</span> filename subfix:<span class="variable">$&#123;file_name_subfix&#125;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 多个匹配模式 -e</span></div><div class="line">$ grep <span class="_">-e</span> <span class="string">"prefix"</span> <span class="_">-e</span> <span class="string">"subfix"</span> . -R -n</div><div class="line">./shell/demo.sh:5:file_name_prefix=<span class="variable">$&#123;file_name%.*&#125;</span></div><div class="line">./shell/demo.sh:6:file_name_subfix=<span class="variable">$&#123;file_name#*.&#125;</span></div><div class="line">./shell/demo.sh:9:<span class="built_in">echo</span> filename prefix:<span class="variable">$&#123;file_name_prefix&#125;</span></div><div class="line">./shell/demo.sh:10:<span class="built_in">echo</span> filename subfix:<span class="variable">$&#123;file_name_subfix&#125;</span></div></pre></td></tr></table></figure>
<ul>
<li>grep中包含或排除文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ grep <span class="string">"file_name"</span> . -R -n --include *.&#123;md&#125;</div><div class="line">$ grep <span class="string">"file_name"</span> . -R -n --exclude *.&#123;md&#125;</div><div class="line">./shell/demo.sh:3:file_name=some.jpg</div><div class="line">./shell/demo.sh:5:file_name_prefix=<span class="variable">$&#123;file_name%.*&#125;</span></div><div class="line">./shell/demo.sh:6:file_name_subfix=<span class="variable">$&#123;file_name#*.&#125;</span></div><div class="line">./shell/demo.sh:8:<span class="built_in">echo</span> filename:<span class="variable">$&#123;file_name&#125;</span></div><div class="line">./shell/demo.sh:9:<span class="built_in">echo</span> filename prefix:<span class="variable">$&#123;file_name_prefix&#125;</span></div><div class="line">./shell/demo.sh:10:<span class="built_in">echo</span> filename subfix:<span class="variable">$&#123;file_name_subfix&#125;</span></div></pre></td></tr></table></figure>
<ul>
<li>打印匹配文件之前之后的行</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 包含匹配之前两行</span></div><div class="line">$ cat demo.sh | grep <span class="string">"prefix"</span> -B 2</div><div class="line">file_name=some.jpg</div><div class="line"></div><div class="line">file_name_prefix=<span class="variable">$&#123;file_name%.*&#125;</span></div><div class="line">--</div><div class="line"></div><div class="line"><span class="built_in">echo</span> filename:<span class="variable">$&#123;file_name&#125;</span></div><div class="line"><span class="built_in">echo</span> filename prefix:<span class="variable">$&#123;file_name_prefix&#125;</span></div><div class="line"></div><div class="line"><span class="comment"># 匹配行前后两行都输出</span></div><div class="line">$ cat demo.sh | grep <span class="string">"prefix"</span> -C 2</div><div class="line">file_name=some.jpg</div><div class="line"></div><div class="line">file_name_prefix=<span class="variable">$&#123;file_name%.*&#125;</span></div><div class="line">file_name_subfix=<span class="variable">$&#123;file_name#*.&#125;</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> filename:<span class="variable">$&#123;file_name&#125;</span></div><div class="line"><span class="built_in">echo</span> filename prefix:<span class="variable">$&#123;file_name_prefix&#125;</span></div><div class="line"><span class="built_in">echo</span> filename subfix:<span class="variable">$&#123;file_name_subfix&#125;</span></div></pre></td></tr></table></figure>
<h3 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$ cat a.dat</div><div class="line">NO	NAME	SCORE</div><div class="line">1	jack	100</div><div class="line">2	tony	99</div><div class="line">3	spark	90</div><div class="line"></div><div class="line"><span class="comment"># cut默认以\t分隔，-f2,3 第二、三列</span></div><div class="line">$ cut <span class="_">-f</span>2,3 a.dat</div><div class="line">NAME	SCORE</div><div class="line">jack	100</div><div class="line">tony	99</div><div class="line">spark	90</div><div class="line"></div><div class="line"><span class="comment"># 打印前5个字符</span></div><div class="line">$ cut -c1-5 a.dat</div><div class="line">NO	NA</div><div class="line">1	jac</div><div class="line">2	ton</div><div class="line">3	spa</div></pre></td></tr></table></figure>
<h3 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">$ cat a.dat</div><div class="line">NO	NAME	SCORE</div><div class="line">1	jack	100</div><div class="line">2	tony	99</div><div class="line">3	spark	90</div><div class="line"></div><div class="line"><span class="comment"># 注意并未改变原始文件，g表示全局替换,如果没有此参数，则只替换匹配的第一处</span></div><div class="line">$ sed <span class="string">'s/90/91/g'</span> a.dat</div><div class="line">NO	NAME	SCORE</div><div class="line">1	jack	100</div><div class="line">2	tony	99</div><div class="line">3	spark	91</div><div class="line"></div><div class="line"><span class="comment"># 加上-i选项，同时改变原始文件</span></div><div class="line">$ sed -i <span class="string">'s/90/91/g'</span> a.dat</div><div class="line">$ cat a.dat</div><div class="line">NO	NAME	SCORE</div><div class="line">1	jack	100</div><div class="line">2	tony	99</div><div class="line">3	spark	91</div><div class="line"></div><div class="line"><span class="comment"># 3g 从第三次匹配开始替换</span></div><div class="line">$ sed -i <span class="string">'s/91/911/3g'</span> a.dat</div><div class="line">$ cat a.dat</div><div class="line">NO	NAME	SCORE</div><div class="line">1	jack	100</div><div class="line">2	tony	99</div><div class="line">3	spark	91</div><div class="line"></div><div class="line">$ cat a.dat</div><div class="line">NO	NAME	SCORE</div><div class="line">1	jack	100</div><div class="line">2	tony	99</div><div class="line">3	spark	91</div><div class="line"></div><div class="line">4	java	98</div><div class="line"></div><div class="line"><span class="comment"># 移除匹配的空白行</span></div><div class="line">$ sed  <span class="string">'/^$/d'</span> a.dat</div><div class="line">NO	NAME	SCORE</div><div class="line">1	jack	100</div><div class="line">2	tony	99</div><div class="line">3	spark	91</div><div class="line">4	java	98</div></pre></td></tr></table></figure>
<h3 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h3><ul>
<li>基本用法,awk “BEGIN{command} {command} END{command}” ,三个部分均可以省略</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">echo</span> <span class="_">-e</span> <span class="string">"line1\nline2"</span> | awk <span class="string">'BEGIN&#123; print "start"&#125; &#123;print&#125; END&#123; print "END" &#125;'</span></div><div class="line">start</div><div class="line">line1</div><div class="line">line2</div><div class="line">END</div></pre></td></tr></table></figure>
<ul>
<li>awk中特殊变量</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># NR:表示在执行过程中对应当前行号，NF:在执行过程中对应当前行的字段数，$0: 执行过程中当前行的内容，$1: 第一个字段的文本内容, $2: 第二个字段文本内容</span></div><div class="line">$ <span class="built_in">echo</span> <span class="_">-e</span> <span class="string">"line1 f2 f3\nline2 f4 f5\nline3 f6 f7"</span> | awk <span class="string">'&#123;print "line no:"NR",No of fields:"NF", $0="$0", $1="$1", $2="$2&#125;'</span></div><div class="line">line no:1,No of fields:3, <span class="variable">$0</span>=line1 f2 f3, <span class="variable">$1</span>=line1, <span class="variable">$2</span>=f2</div><div class="line">line no:2,No of fields:3, <span class="variable">$0</span>=line2 f4 f5, <span class="variable">$1</span>=line2, <span class="variable">$2</span>=f4</div><div class="line">line no:3,No of fields:3, <span class="variable">$0</span>=line3 f6 f7, <span class="variable">$1</span>=line3, <span class="variable">$2</span>=f6</div><div class="line"></div><div class="line"><span class="comment"># 统计文件行数</span></div><div class="line">$ awk <span class="string">'END&#123;print NR&#125;'</span> ./demo.sh</div><div class="line">10</div></pre></td></tr></table></figure>
<ul>
<li>使用awk进行行过滤</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 输出行号小于5的行</span></div><div class="line">$ awk <span class="string">'NR &lt; 5'</span> ./demo.sh</div><div class="line"></div><div class="line"><span class="comment"># 输出第一到第4行</span></div><div class="line">$ awk <span class="string">'NR==1,NR==4'</span> ./demo.sh</div><div class="line"></div><div class="line"><span class="comment"># 包含关键词"file_name"的行</span></div><div class="line">$ awk <span class="string">'/file_name/'</span> ./demo.sh</div><div class="line"></div><div class="line"><span class="comment"># 迭代文件每行</span></div><div class="line">$ cat demo.sh | (<span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$line</span> ; <span class="keyword">done</span>)</div></pre></td></tr></table></figure>
<p>遍历一行数据的每个单词</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line">line=<span class="string">"hello shell"</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> world <span class="keyword">in</span> <span class="variable">$line</span></div><div class="line"><span class="keyword">do</span></div><div class="line">	<span class="built_in">echo</span> <span class="variable">$world</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
<p>通过for循环遍历</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line">line=<span class="string">"hello shell"</span></div><div class="line"></div><div class="line"><span class="keyword">for</span>((i=0; i&lt;<span class="variable">$&#123;#line&#125;</span>; i++))</div><div class="line"><span class="keyword">do</span></div><div class="line">	<span class="built_in">echo</span> <span class="variable">$&#123;line:i:1&#125;</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
<hr>
<p>参考:</p>
<ul>
<li><a href="http://c.biancheng.net/cpp/shell/" target="_blank" rel="external">Linux Shell脚本教程：30分钟玩转Shell脚本编程</a></li>
</ul>
	  

	  <div>
  		<center>
		  <div class="pagination">
<ul class="pagination">
	
	
	
	
	
		
	
		
	
		
	
		
			
			
		
	
		
	
		
	
		
			
			
			
		
	
		
	
		
	
		
	
		
	
		
	
	
		<li class="prev disabled"><a><i class="fa fa-arrow-circle-o-left"></i>prev</a></li>
	
	<li><a href="/"><i class="fa fa-archive"></i>Home</a></li>
	
		<li class="next"><a href="/2015/08/05/linux/linux/" class="alignright next">next<i class="fa fa-arrow-circle-o-right"></i></a></li>
	
</ul>
</div>

		</center>
	  </div>
	  
	</div> <!-- col-md-9/col-md-12 -->
	
  </div><!-- row -->

	</div>
  </div>
  <div class="container-narrow">
	<footer> <p>
  &copy; 2016 Jassassin
  
      with help from <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-wixo/">Wixo</a>.    
</p> </footer>
  </div> <!-- container-narrow -->
  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.tableofcontents.min.js"></script>
<script src="/js/tocgenerator.min.js"></script>
<script src="/js/main.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
</html>
